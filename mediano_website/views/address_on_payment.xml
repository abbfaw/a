<odoo>
    <data>

        <!-- Changement de Adresse par Coordonnées -->
        <template id="wz_checkout_modded" inherit_id="website_sale.wizard_checkout" name="Wizard Checkout">
            <xpath expr="//div[hasclass('row')]/div[hasclass('col-xl')]/div[hasclass('wizard')]/div[hasclass('progress-wizard')]/a[hasclass('no-decoration')][2]/div[@id='wizard-step20']/div[hasclass('progress-wizard-steplabel')]"
                   position="replace">
                <div class="text-center progress-wizard-steplabel">Coordonnées</div>
            </xpath>
        </template>

        <!-- Ajout d'une div pour le rafraichissement de la page -->
        <template id="website_sale.address_on_payment" name="Address on payment">
            <div class="card">
                <div class="card-body" id="shipping_and_billing">
                    <a class="float-end no-decoration" href="/shop/checkout">
                        <i class="fa fa-edit"/>
                        <!--                        <span class="d-none"> Modifier</span>-->
                    </a>
                    <t t-set="same_shipping"
                       t-value="bool(order.partner_shipping_id==order.partner_id or only_services)"/>
                    <div id="facturation">
                        <!-- Adresse de facturation & livraison -->
                        <div id="adl_div" t-if="same_shipping and not only_services">
                            <b>
                                <t t-if="same_shipping and not only_services">Adresse de Livraison :</t>
                            </b>
                            <span t-esc="order.partner_id"
                                  t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"
                                  class="address-inline"/>
                            <input type="hidden" name="fact" value="1"/>
                        </div>
                        <!-- Adresse de livraison -->
                        <div id="shwrm_div" t-if="not same_shipping and not only_services">
                            <b>Adresse de Livraison :</b>
                            <span t-esc="order.partner_shipping_id"
                                  t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"
                                  class="address-inline"/>
                            <input type="hidden" name="fact" value="0"/>
                        </div>
                    </div>
                    <!-- bouton radio -->
                    <div>
                        <label class="labellivraison mt-2 mb-2">
                            <input type="radio" name="options" id="adl"
                                   autocomplete="off"
                                   value="livraison" t-att-checked="order.partner_shipping_id == order.new_partner"
                            />
                            Votre lieu de livraison
                        </label>
                        <div class="clearfix"/>
                        <label class="labelshowroom mt-2 mb-2">
                            <input type="radio" name="options" id="shwrm"
                                   autocomplete="off"
                                   value="Showroom" t-att-checked="order.partner_shipping_id == order.old_partner"/>
                            Récupérer depuis le Showroom
                        </label>
                    </div>
                </div>
            </div>
        </template>

        <!-- Coût de la Livraison-->
        <template id="website_sale_delivery.payment_delivery_shipping_method" name="Delivery Shipping method"
                  inherit_id="website_sale.address_on_payment">
            <xpath expr="//div[@id='shipping_and_billing']" position="inside">
                <t t-set="delivery_nb" t-value="(deliveries and len(deliveries))"/>
                <div t-if="delivery_nb == 1" id="delivery_carrier" class="mt4">
                    <b>Frais de livraison :</b>
                    <t t-foreach="deliveries" t-as="delivery">
                        <t t-call="website_sale_delivery.payment_delivery_methods"/>
                    </t>
                </div>
            </xpath>

        </template>

        <!-- badge vert pour le prix -->
        <template id="website_sale_delivery.payment_delivery_methods">
            <input t-att-value="delivery.id" t-att-id="'delivery_%i' % delivery.id" type="radio" name="delivery_type"
                   t-att-checked="order.carrier_id and order.carrier_id.id == delivery.id and 'checked' or False"
                   t-att-class="'d-none' if delivery_nb == 1 else ''"/>
            <label class="label-optional" t-field="delivery.name"/>
            <t t-set='badge_class' t-value="(delivery_nb != 1 and 'float-end ' or '') + 'badge text-bg-secondary'"/>
            <span id="badge_vert" t-attf-class="#{badge_class} o_wsale_delivery_badge_price">
                <t t-if="website_sale_order.amount_delivery > 0">
                    <span t-field="website_sale_order.amount_delivery" class="monetary_field"
                          style="white-space: nowrap;"
                          t-options='{
                              "widget": "monetary",
                              "display_currency": website_sale_order.currency_id,
                          }'/>
                </t>
                <t t-else="website_sale_order.amount_delivery == 0">Gratuit</t>
            </span>
            <t t-if="delivery.website_description">
                <div t-field="delivery.website_description" class="text-muted mt8"/>
            </t>
        </template>

        <!-- remplacement de ma méthode de paiement et du bouton Payer maintenant -->
        <template id="bouton_payer" inherit_id="website_sale.payment" name="Payment">

            <!-- Méthode de paiement-->
            <xpath expr="//t[@t-if='website_sale_order.amount_total']" position="replace">
                <t t-if="website_sale_order.amount_total">
                    <div t-if="providers or tokens" id="payment_method" class="mt-3">
                        <h3 class="mb24">Méthode de Paiement</h3>
                        <t t-call="payment.checkout">
                            <t t-set="footer_template_id" t-value="'website_sale.payment_footer'"/>
                            <t t-set="submit_button_label">Commander</t>
                        </t>
                    </div>
                    <div t-else="" class="alert alert-warning">
                        <strong>Aucune option de paiement appropriée n'a pu être trouvée.</strong>
                        <br/>
                        Si vous pensez qu'il s'agit d'une erreur, veuillez contacter l'administrateur du site.
                    </div>
                </t>
            </xpath>
        </template>

        <!-- Page de confirmation -->
        <template id="confirmation_modded" inherit_id="website_sale.confirmation">
            <xpath expr="//*[hasclass('col-xl-auto')]/t[@t-set='website_sale_order']" position="before">
                <span class="title mb-2">Résumé de ma commande</span>
            </xpath>
            <xpath expr="//*[@id='oe_structure_website_sale_confirmation_2']" position="after">
                <div class="mt8">
                    <!-- bouton retour à la boutique pour la vue 1366 * 768 -->
                    <a role="button"
                       class="btn btn-primary float-start d-none d-xl-inline-block mb32"
                       href="/shop">
                        <span class="fa fa-arrow-circle-left"/>
                        <span class="d-none d-md-inline">Boutique</span>
                    </a>

                    <!-- bouton retour à mon compte pour la vue 1366 * 768 -->
                    <a role="button"
                       class="btn btn-warning float-end d-none d-xl-inline-block mb32"
                       href="/my/home">
                        <span class="d-none d-md-inline">Mon compte</span>
                        <span class="fa fa-arrow-circle-right"/>
                    </a>
                </div>
            </xpath>
            <xpath expr="//*[hasclass('col-xl-auto')]" position="after">
                <div class="d-xl-none mt8">
                    <a role="button"
                       class="btn btn-primary float-start mb32"
                       href="/shop">
                        <span class="fa fa-arrow-circle-left"/>
                        <!--                        <span class="d-none d-md-inline">Retour à la</span>-->
                        <span class="d-sm-inline">Boutique</span>
                    </a>

                    <a role="button" class="btn btn-warning float-end mb32"
                       href="/my/home">
                        <!--                        <span class="d-none d-md-inline">Retour à</span>-->
                        <span class="d-sm-inline">Mon compte</span>
                        <span class="fa fa-arrow-circle-right"/>
                    </a>
                </div>
            </xpath>
            <xpath expr="//*[hasclass('card-body')]" position="replace">
                <t t-set="same_shipping"
                   t-value="bool(order.partner_shipping_id==order.partner_invoice_id or only_services)"/>
                <!--                <div class="mt-2 mb-2">-->
                <!--                    <b><t t-if="same_shipping and not only_services">Livraison </t>:</b>-->
                <!--                    <span t-esc='order.partner_invoice_id'-->
                <!--                          t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"-->
                <!--                          class="address-inline"/>-->
                <!--                </div>-->
                <div t-if="same_shipping or not same_shipping and not only_services"
                     groups="account.group_delivery_invoice_address" class="mt-2 mb-2">
                    <b>Livraison :</b>
                    <span t-esc='order.partner_shipping_id'
                          t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"
                          class="address-inline"/>
                </div>
            </xpath>
        </template>

        <!-- modification de la manière dont les prix s'affichent -->
        <!--        <template id="website_sale_delivery.payment_delivery" name="Delivery Costs" inherit_id="website_sale.payment">-->
        <!--            <xpath expr="//t[@t-if='website_sale_order.amount_total']" position="before">-->
        <!--                <div t-if="deliveries" id="delivery_carrier">-->
        <!--                    <t t-set="delivery_nb" t-value="len(deliveries)"/>-->
        <!--                    <h3 t-if="delivery_nb &gt; 1" class="mb24">Choose a delivery method</h3>-->
        <!--                    <div t-if="delivery_nb &gt; 1" class="card border-0" id="delivery_method">-->
        <!--                        <ul class="list-group">-->
        <!--                            <t t-foreach="deliveries" t-as="delivery">-->
        <!--                                <t t-if="delivery.id == 1">-->
        <!--                                    <div class="mb-3">-->
        <!--                                        <li class="list-group-item o_delivery_carrier_select">-->
        <!--                                            <input t-att-value="delivery.id" t-att-id="'delivery_%i' % delivery.id"-->
        <!--                                                   type="radio"-->
        <!--                                                   name="delivery_type"-->
        <!--                                                   t-att-checked="order.carrier_id and order.carrier_id.id == delivery.id and 'checked' or False"-->
        <!--                                                   t-att-class="'d-none' if delivery_nb == 1 else ''"/>-->
        <!--                                            <label class="label-optional" t-field="delivery.name"/>-->
        <!--                                            <t t-set='badge_class'-->
        <!--                                               t-value="(delivery_nb != 1 and 'float-end ' or '') + 'badge text-bg-secondary'"/>-->
        <!--                                            <span t-attf-class="#{badge_class} o_wsale_delivery_badge_price">Select to-->
        <!--                                                compute-->
        <!--                                                delivery rate-->
        <!--                                            </span>-->
        <!--                                            <t t-if="delivery.website_description">-->
        <!--                                                <div t-field="delivery.website_description" class="text-muted mt8"/>-->
        <!--                                            </t>-->
        <!--                                        </li>-->
        <!--                                    </div>-->
        <!--                                </t>-->
        <!--                                <t t-if="delivery.id != 1">-->
        <!--                                    <div>-->
        <!--                                        <li class="list-group-item o_delivery_carrier_select">-->
        <!--                                            <input t-att-value="delivery.id" t-att-id="'delivery_%i' % delivery.id"-->
        <!--                                                   type="radio"-->
        <!--                                                   name="delivery_type"-->
        <!--                                                   t-att-checked="order.carrier_id and order.carrier_id.id == delivery.id and 'checked' or False"-->
        <!--                                                   t-att-class="'d-none' if delivery_nb == 1 else ''"/>-->
        <!--                                            <label class="label-optional" t-field="delivery.name"/>-->
        <!--                                            <t t-set='badge_class'-->
        <!--                                               t-value="(delivery_nb != 1 and 'float-end ' or '') + 'badge text-bg-secondary'"/>-->
        <!--                                            <span t-attf-class="#{badge_class} o_wsale_delivery_badge_price">Select to-->
        <!--                                                compute-->
        <!--                                                delivery rate-->
        <!--                                            </span>-->
        <!--                                            <t t-if="delivery.website_description">-->
        <!--                                                <div t-field="delivery.website_description" class="text-muted mt8"/>-->
        <!--                                            </t>-->
        <!--                                        </li>-->
        <!--                                    </div>-->
        <!--                                </t>-->

        <!--                            </t>-->
        <!--                        </ul>-->
        <!--                    </div>-->
        <!--                </div>-->
        <!--            </xpath>-->
        <!--            &lt;!&ndash; we shouldn't be able to pay if there is no way to deliver &ndash;&gt;-->
        <!--            <xpath expr="//div[@id='payment_method']" position="attributes">-->
        <!--                <attribute name="t-att-style">'display: none!important' if not deliveries and delivery_has_storable else-->
        <!--                    ''-->
        <!--                </attribute>-->
        <!--            </xpath>-->
        <!--        </template>-->

    </data>
</odoo>