<odoo>
    <data>
        <!-- Remplacement de process checkout par commander -->
        <template id="website_sale.cart" name="Shopping Cart">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="container oe_website_sale py-2">
                        <div class="row">
                            <div class="col-12">
                                <t t-call="website_sale.wizard_checkout">
                                    <t t-set="step" t-value="10"/>
                                </t>
                            </div>
                            <div class="col-12 col-xl-8 oe_cart">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div t-if="abandoned_proceed or access_token" class="mt8 mb8 alert alert-info"
                                             role="alert"> <!-- abandoned cart choices -->
                                            <t t-if="abandoned_proceed">
                                                <p>Your previous cart has already been completed.</p>
                                                <p t-if="website_sale_order">Please proceed your current cart.</p>
                                            </t>
                                            <t t-if="access_token">
                                                <p>This is your current cart.</p>
                                                <p>
                                                    <strong>
                                                        <a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=squash">
                                                            Click here
                                                        </a>
                                                    </strong>
                                                    if you want to restore your previous cart. Your current cart will be
                                                    replaced with your previous cart.
                                                </p>
                                                <p>
                                                    <strong>
                                                        <a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=merge">
                                                            Click here
                                                        </a>
                                                    </strong>
                                                    if you want to merge your previous cart into current cart.
                                                </p>
                                            </t>
                                        </div>
                                        <t t-call="website_sale.cart_lines"/>
                                        <div class="clearfix"/>
                                        <div class="d-xl-none mb-2" id="o_cart_summary">
                                            <t t-call="website_sale.short_cart_summary"/>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <a role="button" href="/shop" class="btn btn-secondary mb32">
                                                    <span class="fa fa-chevron-left"/>
                                                    Continuer
                                                    <span class="d-none d-md-inline">vos achats</span>
                                                </a>
                                            </div>
                                            <div class="d-flex flex-column"
                                                 t-if="website_sale_order and website_sale_order.website_order_line">
                                                <a role="button" class="btn btn-primary float-end"
                                                   href="/shop/checkout?express=1">
                                                    <span>Commander</span>
                                                    <span class="fa fa-chevron-right"/>
                                                </a>
                                                <t t-call="payment.express_checkout"/>
                                            </div>
                                        </div>
                                        <div class="oe_structure" id="oe_structure_website_sale_cart_1"/>
                                    </div>
                                </div>
                            </div>
                            <div class="d-none d-xl-block col-xl-4" id="o_cart_summary">
                                <t t-call="website_sale.short_cart_summary"/>
                            </div>
                        </div>
                    </div>
                    <div class="oe_structure" id="oe_structure_website_sale_cart_2"/>
                </div>
            </t>
        </template>

        <template id="website_sale.short_cart_summary" name="Short Cart right column">
            <div class="card js_cart_summary" t-if="website_sale_order and website_sale_order.website_order_line">
                <div class="card-body">
                    <h4 class="d-none d-xl-block">Order Total</h4>
                    <hr class="d-none d-xl-block"/>
                    <div>
                        <t t-call="website_sale.total">
                            <t t-set="no_rowspan" t-value="1"/>
                        </t>
                        <a role="button" t-if="website_sale_order and website_sale_order.website_order_line"
                           class="btn btn-secondary float-end d-none d-xl-inline-block" href="/shop/checkout?express=1">
                            <span>Commander</span>
                        </a>
                    </div>
                </div>
            </div>
        </template>

        <!-- remplacement du bouton return to cart par continuer vos achats -->
        <template id="website_sale.payment_footer" name="Payment">
            <div name="o_checkbox_container"
                 class="form-check mt-2 o_accept_tc_button"/>
            <div class="float-start mt-2">
                <a role="button" href="/shop/cart" class="btn btn-secondary">
                    <span class="fa fa-chevron-left"/>
                    Continuer
                    <span class="d-none d-md-inline">vos achats</span>
                </a>
            </div>
            <div class="float-end mt-2">
                <button name="o_payment_submit_button"
                        type="submit"
                        class="btn btn-primary"
                        disabled="true"
                        data-icon-class="fa-chevron-right">
                    <t t-esc="submit_button_label"/>
                    <i class="fa fa-chevron-right"/>
                </button>
            </div>
        </template>

        <!-- Changer le logo du bas et mettre celui de progistack-->
        <template id="web.brand_promotion_message" name="Brand Promotion Message">
            <t t-set="odoo_logo">
                <a target="_blank"
                   t-attf-href="https://progistack.net/"
                   class="badge text-bg-light">
                    <img alt="Progistack"
                         src="/mediano_website/static/src/img/menu-logo.png"
                         width="62" height="20"
                         style="width: auto; height: 1em; vertical-align: baseline;"/>
                </a>
            </t>
            <t t-set="final_message">Optimisé par %s%s</t>
            <t t-out="final_message % (odoo_logo, _message and ('- ' + _message) or '')"/>
        </template>

        <!-- Optimisé par Progistack -->
        <template id="website_sale.brand_promotion" inherit_id="website.brand_promotion">
            <xpath expr="//t[@t-call='web.brand_promotion_message']" position="replace">
                <t t-call="web.brand_promotion_message">
                    <t t-set="_message">
                        <a target="_blank"
                           href="https://progistack.net/">Le Logiciel des Entreprises
                        </a>
                    </t>
                    <t t-set="_utm_medium" t-valuef="website"/>
                </t>
            </xpath>
        </template>

        <!-- retrait du bouton contactez nous -->
        <template id="website.header_call_to_action" inherit_id="website.placeholder_header_call_to_action"
                  name="Header Call to Action" active="True">
            <xpath expr="." position="inside">
                <!--                <div t-attf-class="oe_structure oe_structure_solo #{_div_classes}">-->
                <!--                    <section class="s_text_block" data-snippet="s_text_block" data-name="Text">-->
                <!--                        <div class="container">-->
                <!--                            <a href="/contactus" class="btn btn-primary btn_cta">Contact Us</a>-->
                <!--                        </div>-->
                <!--                    </section>-->
                <!--                </div>-->
            </xpath>
        </template>

        <!-- Retrait de la partie des attributs -->
        <template id="website_sale.products_attributes" inherit_id="website_sale.products" active="True"
                  name="Attributes &amp; Variants filters">
            <!--            <xpath expr="//div[hasclass('products_attributes_filters')]" position="inside">-->
            <!--                -->
            <!--            </xpath>-->
        </template>

        <!-- déplacement des catégories -->
<!--        <template id="website_sale.products" name="Products">-->
<!--            <t t-call="website.layout">-->
<!--                <t t-set="additional_title">Shop</t>-->
<!--                <t t-set="grid_block_name">Grid</t>-->
<!--                <t t-set="product_block_name">Product</t>-->

<!--                &lt;!&ndash; Qweb variable defining the class suffix for navbar items.-->
<!--                     Change accordingly to the derired visual result (eg. `primary`, `dark`...)&ndash;&gt;-->
<!--                <t t-set="navClass" t-valuef="light"/>-->

<!--                &lt;!&ndash; Check for active options: the stored value may be used in sub-templates too  &ndash;&gt;-->
<!--                <t t-set="opt_wsale_categories" t-value="is_view_active('website_sale.products_categories')"/>-->
<!--                <t t-set="opt_wsale_attributes" t-value="is_view_active('website_sale.products_attributes')"/>-->
<!--                <t t-set="opt_wsale_filter_price" t-value="is_view_active('website_sale.filter_products_price')"/>-->

<!--                <t t-set="opt_wsale_categories_top" t-value="is_view_active('website_sale.products_categories_top')"/>-->
<!--                <t t-set="opt_wsale_attributes_top" t-value="is_view_active('website_sale.products_attributes_top')"/>-->

<!--                <t t-set="website_sale_pricelists" t-value="website.get_pricelist_available(show_visible=True)"/>-->
<!--                <t t-set="website_sale_sortable" t-value="website._get_product_sort_mapping()"/>-->

<!--                <t t-set="hasLeftColumn" t-value="opt_wsale_categories or opt_wsale_attributes"/>-->

<!--                <t t-set="isFilteringByPrice" t-if="opt_wsale_filter_price"-->
<!--                   t-value="float_round(available_min_price, 2) != float_round(min_price, 2) or float_round(available_max_price, 2) != float_round(max_price, 2)"/>-->
<!--                <t t-set="hasPricelistDropdown"-->
<!--                   t-value="website_sale_pricelists and len(website_sale_pricelists)&gt;1"/>-->
<!--                <t t-set="isSortingBy"-->
<!--                   t-value="[sort for sort in website_sale_sortable if sort[0]==request.params.get('order', '')]"/>-->

<!--                <div id="wrap" class="js_sale o_wsale_products_page">-->
<!--                    <div class="oe_structure oe_empty oe_structure_not_nearest"-->
<!--                         id="oe_structure_website_sale_products_1"/>-->
<!--                    <div class="container oe_website_sale pt-2">-->
<!--                        <div class="row o_wsale_products_main_row align-items-start flex-nowrap">-->
<!--                            <aside t-if="hasLeftColumn" id="products_grid_before"-->
<!--                                   class="d-none d-lg-block position-sticky col-3 px-0 clearfix">-->
<!--                                <div class="o_wsale_products_grid_before_rail vh-100 pe-lg-2 pb-lg-5 overflow-y-auto">-->
<!--                                    <div t-if="opt_wsale_categories" class="products_categories mb-3">-->
<!--                                        <t t-call="website_sale.products_categories_list"/>-->
<!--                                    </div>-->
<!--                                    <div class="products_attributes_filters"/>-->
<!--                                    <t t-if="opt_wsale_filter_price and opt_wsale_attributes"-->
<!--                                       t-call="website_sale.filter_products_price"/>-->
<!--                                </div>-->
<!--                                &lt;!&ndash; catégories aside disposé a gauche &ndash;&gt;-->
<!--                                <t t-if="opt_wsale_categories_top" t-call="website_sale.filmstrip_categories"/>-->
<!--                            </aside>-->
<!--                            <div id="products_grid"-->
<!--                                 t-attf-class="#{'o_wsale_layout_list' if layout_mode == 'list' else ''} {{'col-lg-9' if hasLeftColumn else 'col-12'}}">-->
<!--                                <t t-call="website_sale.products_breadcrumb">-->
<!--                                    <t t-set="_classes" t-valuef="d-none d-lg-flex w-100 p-0 small"/>-->
<!--                                </t>-->
<!--                                <div class="products_header btn-toolbar flex-nowrap align-items-center justify-content-between mb-3">-->
<!--                                    <t t-call="website_sale.search">-->
<!--                                        <t t-set="search" t-value="original_search or search"/>-->
<!--                                        <t t-set="_form_classes"-->
<!--                                           t-valuef="d-lg-inline {{'d-inline' if not category else 'd-none'}}"/>-->
<!--                                    </t>-->

<!--                                    <t t-call="website_sale.pricelist_list" t-cache="pricelist">-->
<!--                                        <t t-set="_classes" t-valuef="d-none d-lg-inline ms-3"/>-->
<!--                                    </t>-->

<!--                                    <t t-if="is_view_active('website_sale.sort')" t-call="website_sale.sort">-->
<!--                                        <t t-set="_classes" t-valuef="d-none d-lg-inline-block ms-3"/>-->
<!--                                    </t>-->

<!--                                    <div t-if="category" class="d-flex align-items-center d-lg-none me-auto">-->
<!--                                        <t t-if="not category.parent_id" t-set="backUrl" t-valuef="/shop"/>-->
<!--                                        <t t-else="" t-set="backUrl"-->
<!--                                           t-value="keep('/shop/category/' + slug(category.parent_id), category=0)"/>-->

<!--                                        <a t-attf-class="btn btn-{{navClass}} me-2"-->
<!--                                           t-att-href="category.parent_id and keep('/shop/category/' + slug(category.parent_id), category=0) or '/shop'">-->
<!--                                            <i class="fa fa-angle-left"/>-->
<!--                                        </a>-->
<!--                                        <h4 t-out="category.name" class="mb-0 me-auto"/>-->
<!--                                    </div>-->

<!--                                    <t t-if="is_view_active('website_sale.add_grid_or_list_option')"-->
<!--                                       t-call="website_sale.add_grid_or_list_option">-->
<!--                                        <t t-set="_classes" t-valuef="d-flex ms-3"/>-->
<!--                                    </t>-->

<!--                                    <button t-if="is_view_active('website_sale.sort') or opt_wsale_categories or opt_wsale_attributes or opt_wsale_attributes_top"-->
<!--                                            t-attf-class="btn btn-{{navClass}} position-relative ms-3 {{not opt_wsale_attributes_top and 'd-lg-none'}}"-->
<!--                                            data-bs-toggle="offcanvas"-->
<!--                                            data-bs-target="#o_wsale_offcanvas">-->
<!--                                        <i class="fa fa-sliders"/>-->
<!--                                        <span t-if="isFilteringByPrice or attrib_set"-->
<!--                                              t-attf-class="position-absolute top-0 start-100 translate-middle badge border border-{{navClass}} rounded-circle bg-danger p-1">-->
<!--                                            <span class="visually-hidden">filters active</span>-->
<!--                                        </span>-->
<!--                                    </button>-->
<!--                                </div>-->

<!--                                &lt;!&ndash; catégories aside disposé a droite &ndash;&gt;-->
<!--                                <div class="d-block d-sm-none">-->
<!--                                    <t t-if="opt_wsale_categories_top" t-call="website_sale.filmstrip_categories"/>-->
<!--                                </div>-->


<!--                                <div t-if="original_search and products" class="alert alert-warning mt8">-->
<!--                                    No results found for '<span t-esc="original_search"/>'. Showing results for '<span-->
<!--                                        t-esc="search"/>'.-->
<!--                                </div>-->

<!--                                <t t-if="category">-->
<!--                                    <t t-set='editor_msg'>Drag building blocks here to customize the header for "<t-->
<!--                                            t-esc='category.name'/>" category.-->
<!--                                    </t>-->
<!--                                    <div class="mb16" id="category_header" t-att-data-editor-message="editor_msg"-->
<!--                                         t-field="category.website_description"/>-->
<!--                                </t>-->

<!--                                <div t-cache="pricelist,products" t-if="products"-->
<!--                                     class="o_wsale_products_grid_table_wrapper pt-3 pt-lg-0">-->
<!--                                    <table class="table table-borderless h-100 m-0" t-att-data-ppg="ppg"-->
<!--                                           t-att-data-ppr="ppr" t-att-data-default-sort="website.shop_default_sort"-->
<!--                                           t-att-data-name="grid_block_name">-->
<!--                                        <colgroup t-ignore="true">-->
<!--                                            &lt;!&ndash; Force the number of columns (useful when only one row of (x < ppr) products) &ndash;&gt;-->
<!--                                            <col t-foreach="ppr" t-as="p"/>-->
<!--                                        </colgroup>-->
<!--                                        <tbody>-->
<!--                                            <tr t-foreach="bins" t-as="tr_product">-->
<!--                                                <t t-foreach="tr_product" t-as="td_product">-->
<!--                                                    <t t-if="td_product">-->
<!--                                                        &lt;!&ndash; We use t-attf-class here to allow easier customization &ndash;&gt;-->
<!--                                                        <td t-att-colspan="td_product['x'] != 1 and td_product['x']"-->
<!--                                                            t-att-rowspan="td_product['y'] != 1 and td_product['y']"-->
<!--                                                            t-attf-class="oe_product"-->
<!--                                                            t-att-data-ribbon-id="td_product['ribbon'].id"-->
<!--                                                            t-att-data-name="product_block_name">-->
<!--                                                            <div t-attf-class="o_wsale_product_grid_wrapper position-relative h-100 o_wsale_product_grid_wrapper_#{td_product['x']}_#{td_product['y']}">-->
<!--                                                                <t t-call="website_sale.products_item">-->
<!--                                                                    <t t-set="product" t-value="td_product['product']"/>-->
<!--                                                                </t>-->
<!--                                                            </div>-->
<!--                                                        </td>-->
<!--                                                    </t>-->
<!--                                                    <td t-else=""/>-->
<!--                                                </t>-->
<!--                                            </tr>-->
<!--                                        </tbody>-->
<!--                                    </table>-->
<!--                                </div>-->
<!--                                <div t-else="" class="text-center text-muted mt128 mb256">-->
<!--                                    <t t-if="not search">-->
<!--                                        <h3 class="mt8">No product defined</h3>-->
<!--                                        <p t-if="category">No product defined in category "<strong-->
<!--                                                t-esc="category.display_name"/>".-->
<!--                                        </p>-->
<!--                                    </t>-->
<!--                                    <t t-else="">-->
<!--                                        <h3 class="mt8">No results</h3>-->
<!--                                        <p>No results for "<strong t-esc='search'/>"-->
<!--                                            <t t-if="category">in category "<strong t-esc="category.display_name"/>"-->
<!--                                            </t>-->
<!--                                            .-->
<!--                                        </p>-->
<!--                                    </t>-->
<!--                                    <p t-ignore="true" groups="sales_team.group_sale_manager">Click <i>'New'</i> in the-->
<!--                                        top-right corner to create your first product.-->
<!--                                    </p>-->
<!--                                </div>-->
<!--                                <div class="products_pager d-flex justify-content-center pt-5 pb-3">-->
<!--                                    <t t-call="website.pager"/>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        <t t-call="website_sale.o_wsale_offcanvas"/>-->
<!--                    </div>-->
<!--                    <div class="oe_structure oe_empty oe_structure_not_nearest"-->
<!--                         id="oe_structure_website_sale_products_2"/>-->
<!--                </div>-->
<!--            </t>-->
<!--        </template>-->


        <!-- mise en place des catégories de aside -->
<!--        <template id="product_modded" inherit_id="website_sale.products" name="Products">-->
<!--            <xpath expr="//t[@t-call='website.layout']/div[@id='wrap']/div[hasclass('oe_website_sale')]/div[hasclass('o_wsale_products_main_row')]/aside[hasclass('position-sticky')]"-->
<!--                   position="replace">-->
<!--                <aside t-if="hasLeftColumn" id="products_grid_before"-->
<!--                       class="d-none d-lg-block position-sticky col-3 px-0 clearfix">-->
<!--                    <t t-if="category.id">-->
<!--                        <t t-set="entries"-->
<!--                           t-value="not search and category.child_id or category.child_id.filtered(lambda c: category.id in search_categories_ids)"/>-->

<!--                        <t t-if="not entries">-->
<!--                            <t t-set="parent" t-value="category.parent_id"/>-->
<!--                            <t t-set="entries"-->
<!--                               t-value="not search and parent.child_id or parent.child_id.filtered(lambda c: parent.id in search_categories_ids)"/>-->
<!--                        </t>-->
<!--                    </t>-->
<!--                    <t t-else="">-->
<!--                        <t t-set="entries" t-value="categories"/>-->
<!--                    </t>-->

<!--                    <div t-if="entries"-->
<!--                         class="o_wsale_filmstip_container d-flex align-items-stretch mb-2 overflow-hidden">-->
<!--                        <div class="o_wsale_filmstip_wrapper pb-1 mb-2">-->
<!--                            <ul class="o_wsale_filmstip d-grid align-items-stretch mb-0 list-unstyled overflow-visible">-->
<!--                                <t t-foreach="entries" t-as="c" t-if="c.image_128" t-set="atLeastOneImage"-->
<!--                                   t-value="True"/>-->
<!--                                <t t-if="category.parent_id" t-set="backUrl"-->
<!--                                   t-value="keep('/shop/category/' + slug(category.parent_id), category=0)"/>-->
<!--                                <t t-else="" t-set="backUrl" t-value="'/shop'"/>-->

<!--                                <li t-foreach="entries" t-as="c"-->
<!--                                    t-attf-class="d-grid {{'pe-3'}} my-2"-->
<!--                                    t-att-data-link-href="keep('/shop/category/' + slug(c), category=0)">-->
<!--                                    <input type="radio"-->
<!--                                           t-attf-name="wsale_categories_top_radios_{{parentCategoryId}}"-->
<!--                                           class="btn-check pe-none" t-att-id="c.id" t-att-value="c.id"-->
<!--                                           t-att-checked="'true' if c.id == category.id else None"/>-->

<!--                                    <div t-attf-class=" btn btn-{{navClass}} d-flex {{'ps-2 pe-3' if c.image_128 else ''}} fs-6 fw-normal {{ 'border-primary' if c.id == category.id else '' }} text-start"-->
<!--                                         t-att-for="c.id">-->
<!--                                        <div t-if="c.image_128"-->
<!--                                             t-attf-style="background-image:url('data:image/png;base64,#{c.image_128}')"-->
<!--                                             class="o_image_40_cover oe_img_bg o_bg_img_center rounded-3 me-3"-->
<!--                                             t-att-alt="c.name "/>-->
<!--                                        <span t-field="c.name"/>-->
<!--                                    </div>-->
<!--                                </li>-->
<!--                            </ul>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </aside>-->
<!--            </xpath>-->
<!--        </template>-->

        <!-- Alignement des catégories -->
<!--        <template id="filmstrip_modded" inherit_id="website_sale.filmstrip_categories" name="Categories Filmstrip">-->
<!--            <xpath expr="//*[hasclass('o_wsale_filmstip_container')]" position="replace">-->
<!--                <div t-if="entries" class="o_wsale_filmstip_container d-flex align-items-stretch mb-2 overflow-hidden">-->
<!--                    <div class="o_wsale_filmstip_wrapper pb-1 mb-2 overflow-auto">-->
<!--                        <ul class="o_wsale_filmstip d-flex align-items-stretch mb-0 list-unstyled overflow-visible">-->
<!--                            <t t-foreach="entries" t-as="c" t-if="c.image_128" t-set="atLeastOneImage" t-value="True"/>-->
<!--                            <t t-if="category.parent_id" t-set="backUrl"-->
<!--                               t-value="keep('/shop/category/' + slug(category.parent_id), category=0)"/>-->
<!--                            <t t-else="" t-set="backUrl" t-value="'/shop'"/>-->

<!--                            <li t-foreach="entries" t-as="c"-->
<!--                                t-attf-class="d-flex {{'pe-3' if not c_last else ''}}"-->
<!--                                t-att-data-link-href="keep('/shop/category/' + slug(c), category=0)">-->
<!--                                <input type="radio" t-attf-name="wsale_categories_top_radios_{{parentCategoryId}}"-->
<!--                                       class="btn-check pe-none" t-att-id="c.id" t-att-value="c.id"-->
<!--                                       t-att-checked="'true' if c.id == category.id else None"/>-->

<!--                                <div t-attf-class=" btn btn-{{navClass}} d-flex align-items-center {{'ps-2 pe-3' if c.image_128 else 'px-4'}} fs-6 fw-normal {{ 'border-primary' if c.id == category.id else '' }}"-->
<!--                                     t-att-for="c.id">-->
<!--                                    <div t-if="c.image_128"-->
<!--                                         t-attf-style="background-image:url('data:image/png;base64,#{c.image_128}')"-->
<!--                                         class="o_image_40_cover oe_img_bg o_bg_img_center rounded-3 me-3"-->
<!--                                         t-att-alt="c.name "/>-->
<!--                                    <span t-field="c.name"/>-->
<!--                                </div>-->
<!--                            </li>-->
<!--                        </ul>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </xpath>-->
<!--        </template>-->

    </data>
</odoo>